# [BLP è¯»ä¹¦ç¬”è®° 1](/2021/06/beginning_linux_programming_1.md)

## ä¸ºä»€ä¹ˆè¯´æˆ‘åŸºç¡€å¤ªå·®

é¢è¯•å®˜å’ŒåŒäº‹ç»å¸¸è¯´æˆ‘åŸºç¡€å¤ªå·®ï¼Œä»€ä¹ˆæ˜¯åŸºç¡€å¤ªå·®ï¼Œå°±æ˜¯æ²¡æœ‰ç³»ç»Ÿçš„å­¦ä¹ Linuxæ“ä½œç³»ç»Ÿå’Œç½‘ç»œé€šä¿¡è¿™ç±»åŸºç¡€çŸ¥è¯†

åŒäº‹è‹¦å£å©†å¿ƒåŠæˆ‘è‡ªå·±è¿‡äºå…³æ³¨æ–°çš„æŠ€æœ¯å’Œåº“ï¼Œä¹Ÿè¿‡äºé¢‘ç¹çš„åœ¨å¾®ä¿¡/tgç¾¤å¹æ°´é—²èŠæµªè´¹æ—¶é—´

æˆ‘è¿IOæ¨¡å‹å±éƒ½ä¸æ‡‚å»çœ‹glommioè¿™ç§io_uringæœ‰æ„ä¹‰ä¹ˆï¼Ÿä»¥å‰éƒ½æ˜¯é€šè¿‡æ–‡ç« é›¶é›¶ç¢ç¢çš„å­¦ä¹ æ“ä½œç³»ç»ŸçŸ¥è¯†

æœ€é«˜æ•ˆæœ€å¯é èƒ½ã€Œç³»ç»Ÿã€çš„å­¦å®Œæ“ä½œç³»ç»Ÿç½‘ç»œçŸ¥è¯†è¿˜æ˜¯çœ‹Unixé‚£å‡ æœ¬ç»å…¸ä¹¦ç±

## linux basic overview

ä¸‹é¢è¿™æ®µæ˜¯ä»çŸ¥ä¹ä¸ŠæŠ„æ¥çš„å¯¹linuxç¼–ç¨‹åŸºç¡€çš„æ¦‚è¿°ï¼Œå¸Œæœ›æˆ‘é€šè¿‡ç»å…¸ä¹¦ç±ç³»ç»Ÿçš„å­¦ä¹ åéƒ½èƒ½æŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹:

I/Oæ¨¡å‹ï¼Œäº”å¤§I/Oæ¨¡å‹ï¼Œé˜»å¡ï¼Œéé˜»å¡ï¼Œå¤ç”¨ï¼Œä¿¡å·é©±åŠ¨å’Œå¼‚æ­¥I/Oï¼Œç¯ç¯ç›¸æ‰£ä¸ä¸ç›¸è¿ï¼Œæ¦‚å¿µå’Œæ“ä½œéƒ½è¦ä»”ç»†ç¢ç£¨ï¼Œæœ€é‡è¦çš„å½“å±å¤ç”¨ï¼Œå°±æ˜¯selectï¼Œpollå’Œepollï¼Œé¢è¯•ç¬”è¯•å°±é—®è¿™ä¸ªä¸œè¥¿ï¼Œè¦çŸ¥é“ä»–ä»¬çš„é€‚ç”¨èŒƒå›´å’Œä¼˜ç¼ºç‚¹ã€‚è¿›ç¨‹å’Œçº¿ç¨‹ï¼ŒåŒ…æ‹¬è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µå’ŒåŒºåˆ«ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹çš„å»ºç«‹ï¼ŒåŒæ­¥ï¼Œé€šä¿¡ï¼Œäº’æ–¥ç­‰ç­‰ã€‚ç½‘ç»œç¼–ç¨‹ï¼Œå°±æ˜¯socketç¼–ç¨‹,Linuxç¼–ç¨‹ï¼Œè¿™ä¸ªå­¦ä¸å¥½ç­‰äºå•¥éƒ½æ²¡å­¦ï¼Œè¿™ä¸ªä¼°è®¡è¿˜å¾—äº†è§£ä¸€ä¸‹TCP/IPåè®®ï¼Œç¼–ç¨‹æ–¹é¢ä¸»è¦æ˜¯é‚£å‡ æ­¥ï¼Œç”³è¯·socketï¼Œbindï¼Œlistenï¼Œacceptå‡ æ­¥ï¼Œè¦ç†Ÿæ‚‰ç§å¸¸è§çš„æœåŠ¡å™¨æ¨¡å‹ï¼Œè¿›ç¨‹æ± çº¿ç¨‹æ± æ–¹å¼çš„ï¼Œå¤šè¿›ç¨‹æ–¹å¼çš„ï¼Œå¤ç”¨æ–¹å¼çš„ï¼Œæœ€é‡è¦çš„æ˜¯å¤ç”¨æ–¹å¼çš„ï¼Œè¿™éƒ¨åˆ†å¯ä»¥å…ˆåªå†™æœåŠ¡å™¨ï¼Œæµ‹è¯•ç›´æ¥ç”¨Telnetå°±å¥½äº†

TCP ä¸‰å››æ¡æ‰‹å»ºç«‹é“¾æ¥å’Œå››æ¬¡æŒ¥æ‰‹æ–­å¼€é“¾æ¥çš„è¿‡ç¨‹èƒŒè¯µä¸‹æ¥äº†ï¼Œä½†æ˜¯å½“æˆ‘é—®åˆ°è¿æ¥ä¸€ä¸ª IP ä¸å­˜åœ¨çš„ä¸»æœºæ—¶ï¼Œæ¡æ‰‹è¿‡ç¨‹æ˜¯æ€æ ·çš„ã€æˆ–è€…è¿æ¥ä¸€ä¸ª IP åœ°å€å­˜åœ¨ä½†ç«¯å£å·ä¸å­˜åœ¨çš„ä¸»æœºæ¡æ‰‹è¿‡ç¨‹åˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿå¦‚æœå¯¹ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸åŠ ä»¥ç†è§£ï¼Œæ˜¯å¾ˆéš¾å›ç­”å‡ºè¿™æ ·çš„é—®é¢˜çš„

å…³äºåŸºç¡€æˆ‘è¿˜æœ‰ä¸€äº›é—®é¢˜å’Œç–‘æƒ‘:

- linux IOæ¨¡å‹æ€ä¹ˆçŸ¥é“socketæœ‰æ–°æ•°æ®éœ€è¦è¯»å–: blocking_read, loop-non_blocking_read, loop-select
- std::net::TcpStreamæ€ä¹ˆå…¼é¡¾åŒæ—¶readå’Œwrite,æ‰€ä»¥splitæˆè¯»å†™å„ä¸€ä¸ªstream? åŒæ—¶åªèƒ½è¯»æˆ–å†™åªå¹²ä¸€ä»¶äº‹

## æ“ä½œç³»ç»Ÿ/ç½‘ç»œç»å…¸ä¹¦ç±å­¦ä¹ é¡ºåº

1. Beginning linux programming 4th edition
2. The Linux programming interface(man7.orgæ–‡æ¡£ç½‘ç«™çš„ä½œè€…ï¼Œ1600å¤šé¡µï¼Œç±»ä¼¼APUE)
3. Advance programming in the Unix environment 3th edition
4. Unix Network Programming The Sockets Networking API 3th edition
5. Unix Network Programming Interprocess Communications 2th edition
6. TCP/IP Illustrate Volume 1
7. Linux system programming

ä»¥åæˆ‘æŠŠBeginning linux programmingä¹¦åç¼©å†™æˆBLPï¼Œå…¶å®ƒä¹¦åä¹Ÿç±»ä¼¼çš„ç¼©å†™

## TLPI 1600å¤šé¡µèƒ½çœ‹å®Œå—

é¦–å…ˆä¸€å®šè¦å…‹æœé«˜è€ƒå››å…­çº§è€ƒè¯•æ—¶çœ‹åˆ°é•¿ç¯‡è‹±æ–‡çš„æ–‡ç« å°±å¤´ç–¼çœ‹ä¸ä¸‹å»æˆ–è€…çœ‹çš„éå¸¸æ…¢çš„è‹±è¯­è‹±è¯­æ°´å¹³

æˆ‘ä»¥å‰å¸¸å¸¸6-7åˆ†é’Ÿå†…è¦æ±‚çœ‹å®Œçš„é˜…è¯»ç†è§£æˆ‘çœ‹äº†20åˆ†é’Ÿéƒ½æ²¡çœ‹å®Œå¯¼è‡´æˆ‘è‹±è¯­è€ƒè¯•æ—¶å“ªæ€•ä¸èµ°ç¥ä¹Ÿç»å¸¸æ—¶é—´ä¸å¤Ÿå†™ä¸å®Œ

è¿˜æœ‰å°±æ˜¯ä¸€å®šæ˜¯bç«™/å°è¯´/ç›´æ’­/æ¸¸æˆè¿™ç§ä¸œè¥¿å æ®æˆ‘æ—¶é—´ï¼Œæ—¶é—´æŒ¤ä¸€æŒ¤æ€»æ˜¯æœ‰çš„

ä¾‹å¦‚steamå¥½å‡ ä¸ªæ¸¸æˆæˆ‘éƒ½ç©äº†1000+å°æ—¶ï¼Œæ‹¿è¿™äº›æ—¶é—´å»çœ‹ç»å…¸ä¹¦ï¼Œå“ªæ€•1å°æ—¶åªçœ‹1é¡µéƒ½èƒ½çœ‹å®Œå§

å°±åƒæˆ‘æœ¬æ¥åº”è¯¥06/28å°±å¼€å§‹è¯»BLPçš„ç»“æœå› ä¸ºæ˜¨æ™šçœ‹ç›´æ’­å»äº†æ‹–å»¶ç—‡å¯¼è‡´æµªè´¹ä¸€æ™šä¸Šçš„æ—¶é—´

## ç°æœ‰ç”¨ Rust é‡å†™çš„ Linux å‘½ä»¤ï¼Œå¯ä»¥å‚è€ƒä¸‹

- du -> du-dust // ncdu(C)
- top -> bottom, ytop
- cat -> bat
- ls -> exa
- find -> fd
- ps -> procs
- sed -> sd
- grep -> ripgrep
- diff -> delta
- cd -> zoxide
- fcp -> Svetlitski/fcp

## BLPçš„å­¦ä¹ ç›®æ ‡

1. æé«˜è‹±è¯­é˜…è¯»é€Ÿåº¦ï¼Œå¿«é€ŸæŒæ¡linuxå’Œæ“ä½œç³»ç»Ÿé¢†åŸŸé«˜é¢‘å•è¯
2. ç®€å•çš„ä¸æ·±å…¥çš„è¿‡ä¸€élinuxçš„IOæ¨¡å‹ã€çº¿ç¨‹ã€æ–‡ä»¶ç­‰ç­‰æ¦‚å¿µ
3. é¡ºå¸¦å­¦ä¹ gdbè°ƒè¯•,makefile,shellç¼–ç¨‹ï¼Œgtk/qtéƒ¨åˆ†å¯ä»¥å¿«é€Ÿæ è¿‡

æœ€é‡è¦çš„æ˜¯æƒ³è§£å†³: è‹±è¯­å¥å­ä¸­æ¯ä¸ªå•è¯éƒ½çœ‹ä¼¼è®¤è¯†ï¼Œå¯æ˜¯è¿èµ·æ¥å°±çœ‹ä¸æ‡‚å¥å­çš„æ„æ€

## BLPçš„ä¸è¶³

1. å„ä¸ªæ ‡å‡†è·Ÿwindowsä¹‹é—´çš„å¯¹æ¯”å¤ªæµªè´¹ç¯‡å¹…ï¼Œå¯¹GNUæè¿°è¿‡å¤š
2. 1998å¹´å·¦å³å†™çš„ä¹¦ï¼Œç”šè‡³è¿˜æœ‰è¯»ç£å¸¦è¿™ç§ä¸Šå¤å¤–è®¾ï¼Œæœ‰çš„ç³»ç»Ÿè°ƒç”¨æ²¡æ›´æ–°æˆC99æ ‡å‡†(ä¾‹å¦‚gmtimeä¹¦ä¸Šè¿˜ä¿ç•™0-61é—°ç§’)
leap secondè·Ÿé—°å¹´æ²¡å…³ç³»ï¼Œä»¥å‰åŸå­é’Ÿè·Ÿå¤ªé˜³æ—¶æœ‰è¯¯å·®ç”¨æ¥ä¿®æ­£ç”¨çš„

## è¯»ä¹¦çš„æ–¹æ³•

1. ç›´æ¥è·³è¿‡å‰è¨€ã€æ¨èåºã€å…³äºä½œè€…ã€ç‰ˆæƒä¿¡æ¯éƒ½æ— å…³å†…å®¹ï¼Œç›´æ¥ä»ç›®å½•å¼€å§‹çœ‹
2. å…ˆä¸çœ‹errataå‹˜è¯¯è¡¨ï¼Œèƒ½ä¸èƒ½åœ¨çœ‹ä¹¦æ—¶å‘ç°ä¹¦å†™é”™äº†èƒ½è·Ÿå‹˜è¯¯è¡¨æƒ³åˆ°ä¸€å—å»

## BLPçš„ç« èŠ‚ç®€è¯„é‡è¦æ€§è¯„åˆ†(0-5)

### ch01_getting_started: 1 åˆ†

å†…å®¹æ¯”è¾ƒæ°´ï¼Œè¿‡å¤šç¯‡å¹…ä»‹ç» GNU/UNIX/Windowsï¼Œå¯ä»¥è·³è¿‡

### ch02_shell_programming: 4 åˆ†

ä¾‹å¦‚ `if [ -f $filename ]` é«˜é¢‘å¸¸ç”¨çš„ bash ä»£ç ï¼Œå¼€æºé¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨ï¼Œ

å¦‚æœä½ çœ‹ä¸æ‡‚å°±å€¼å¾—å¾ˆå€¼å¾—ç»†è¯»å¹¶æ•²ä¸€éæ‰€æœ‰ä»£ç ç¤ºä¾‹ï¼Œè¯¥è·Ÿç€ä¹¦ç³»ç»Ÿçš„å­¦ä¸€é bash

### ch03_working_with_files: 5 åˆ†å¿…çœ‹

åŒ…å« /proc æ–‡ä»¶ç³»ç»Ÿï¼Œ C è¯­è¨€æ–‡ä»¶ç›¸å…³ç³»ç»Ÿè°ƒç”¨ï¼Œè¿˜æœ‰é€’å½’æœç´¢æ–‡ä»¶å¤¹çš„ä¾‹å­ï¼Œè¦å¤šç»ƒä¹ ä¹¦ä¸­ä¾‹å­

### ch04_the_linux_environment: 3 åˆ†

ä¸´æ—¶æ–‡ä»¶çš„ç« èŠ‚å¿…çœ‹è€Œä¸”é‡ç‚¹çœ‹ï¼Œæˆ‘å°±æ˜¯çœ‹äº†è¿™ç« ç»™ tensorbase æ•°æ®åº“æ PR æ”¹è¿›äº†ä¸´æ—¶æ–‡ä»¶çš„è¯»å†™

ç„¶å syslog æ—¥å¿—å’Œ resource limit ä¹Ÿæ¯”è¾ƒé‡è¦ï¼Œå‰©ä½™æ—¶é—´æ—¥æœŸå¤„ç†ã€è·å–åŸŸåç”¨æˆ·åã€è·å–ç³»ç»Ÿç‰ˆæœ¬å¯ä»¥äº†è§£ä¸‹

### ch05_terminals: 1 åˆ†

å¿…é¡»äº†è§£ Linux terminal å¦‚ä½•å®ç°è¾“å…¥å¯†ç æ—¶éšè—å¯†ç ï¼Œå…¶ä½™çš„ç¨å¾®äº†è§£æ¦‚å¿µå³å¯ï¼Œæœ¬ç« ä»£ç ç¤ºä¾‹å¯ä»¥ä¸åš

### ch06_curses: 0 åˆ†è·³è¿‡

æœ¬ç« å¯ä»¥å…¨éƒ¨è·³è¿‡ï¼Œä¸å½±å“åç»­ç« èŠ‚é˜…è¯»ï¼Œæœ¬ç« ä»£ç ç¤ºä¾‹å¯ä»¥ä¸åšã€‚

æœ¬ç« ä»‹ç»çš„å‘½ä»¤è¡Œ UI æ¡†æ¶ curses è¦ç”¨åæ ‡å®šä½ä¿®æ”¹ terminal æ˜¾ç¤ºï¼Œé™¤éä½ æƒ³è‡ªå·±å¼€å‘ vim/emacs è¿™ç§å¤æ‚çš„å‘½ä»¤è¡Œ UI è½¯ä»¶ï¼Œå¦åˆ™ä¸ç”¨å­¦

### ch07_data_management: 4 åˆ†

æœ¬ç« å†…å­˜ç®¡ç†ã€æ–‡ä»¶é”ã€æ•°æ®åº“éƒ½æ¯”è¾ƒé‡è¦ï¼Œè™½ç„¶ dbm æ•°æ®åº“ç”¨ä¸ä¸Šï¼Œä½†æ˜¯é‡Œé¢è®²äº†å¾ˆå¤š FFI è°ƒç”¨æ‹·è´ dbm åŠ¨æ€åº“å†…å­˜æ•°æ®çš„å†…å­˜å®‰å…¨é—®é¢˜

### ch08_mysql: 2 åˆ†

åƒæˆ‘è¿™æ ·åœ¨å…¬å¸ç”¨ MySQL åšè¿‡ 1-2 å¹´é¡¹ç›®çš„ï¼Œæœ¬ç« å†…å®¹åŸºæœ¬éƒ½ä¼šï¼Œå°±æ‹¿æ¥å­¦ä¹  MySQL C è¯­è¨€ FFI è°ƒç”¨è€Œå·²

### ch09_development_tool: 0 åˆ†è·³è¿‡

### ch10_debugging: 5 åˆ†å¿…çœ‹

å¯¹äº C/Rust è¿™ç§ç³»ç»Ÿè¯­è¨€å¼€å‘äººå‘˜æ¥è¯´ï¼Œæœ¬ç« ä»‹ç»çš„ gdb/valgrind/gprof/libefence ã€Œæå…¶é‡è¦ã€ï¼Œå¿…é¡»ç†Ÿç»ƒæŒæ¡å„ç§è°ƒè¯•å·¥å…·

### ch11-ch15: process,signal,thread,IPC,socket: 5 åˆ†å¿…çœ‹é¢è¯•å¿…é—®

å…‰çœ‹æ ‡é¢˜å°±çŸ¥é“è·Ÿç¬¬ä¸‰ç« æ–‡ä»¶ç³»ç»Ÿä¸€æ ·ï¼Œéƒ½æ˜¯æå…¶é‡è¦é¢è¯•å¿…é—®çš„æ“ä½œç³»ç»Ÿç½‘ç»œåŸºç¡€çŸ¥è¯†

æˆ‘é‚£ä¸ª6å¹´C++ç»éªŒçš„åŒäº‹æ¨èè¿™æœ¬ä¹¦ç»™æˆ‘æ—¶ï¼Œåå¤å¼ºè°ƒè¿™å‡ ç« å¿…é¡»çƒ‚ç†Ÿï¼Œç„¶åé¢è¯•æ—¶å¿ƒé‡Œå°±ä¸æ…Œäº†

### ch16-ch18_gtk/qt: é€‰çœ‹

## BLPå­¦ä¹ é˜¶æ®µè®°å½•

2021/06/29å¼€å§‹æ¯å¤©çœ‹30+é¡µçš„è‹±æ–‡ä¹¦ç±ã€æ¸¸æ³³1kmã€å¤§é—¨å…³é—­å‰å‰ç¦»å¼€åŠå…¬æ¥¼ã€11ç‚¹åŠå‰å…¥ç¡...

ä» 2021/06/29 å¼€å§‹è¯»ï¼š
- 2021/06/29: 28-64 # å†…å®¹æ¯”è¾ƒæ°´ï¼Œæ‰€ä»¥æˆ‘çœ‹çš„å¿«
- 2021/06/30: 65-100
- 2021/07/01: 101-121
- 2021/07/02: 121-141
- 2021/07/03: 142-142
- 2021/07/04: 143-157
- 2021/07/05: 158-162
- 2021/07/06: 163-178
- 2021/07/07: 179-193
- 2021/07/08: 194-302 # ch05/ch06å‰é¢1-2ä»£ç ä¾‹å­è¿˜èƒ½æ•²ï¼Œåé¢çš„åæ ‡æ“ä½œterminaléƒ½å¿«é€Ÿè·³è¿‡
- 2021/07/09: 303-316
- 2021/07/10: 317-324
- 2021/07/11: 325-376 # MySQLåŸºç¡€çŸ¥è¯†ï¼Œå†…å®¹æ¯”è¾ƒæ°´ï¼Œæ‰€ä»¥æˆ‘çœ‹çš„å¿«
- 2021/07/12: 377-477 # ch09é™¤äº†makeå¿«é€Ÿæ‰«è¿‡
- 2021/07/13: 478-502
- 2021/07/14: 502-536
- 2021/07/15: 537-610
- 2021/07/16: 611-621
- 2021/07/17: 622-643
- 2021/07/18: 644-656
- 2021/07/19: 657-686
- 2021/07/20: 687-700
- 2021/07/21: 701-701
- 2021/07/22: 701-701
- 2021/07/23: 701-701
- 2021/07/24: 701-701
- 2021/07/25: 701-701
- 2021/07/26: 702-744
- 2021/07/27: 745-792(end)

æˆ‘ä» 28/819 Introduction å¼€å§‹ç»†çœ‹ BLP

é«˜é¢‘è¯:
- facilities: è®¾æ–½/å·¥å…·
- preemptive: æŠ¢å å¼
- vice versa: åä¹‹äº¦ç„¶
- simultaneous: åŒæ—¶çš„
- advisory: å’¨è¯¢ï¼Œä¾‹å¦‚ Advisory lock (advisoryè¡¨ç¤ºä¸é™åˆ¶å…¶å®ƒè¿›ç¨‹è¯»å†™ï¼Œå¹¶éå¼ºåˆ¶æ‰§è¡Œçš„æ„æ€)
- re-entrant: é‡å…¥ï¼Œæåˆ°ä¿¡å·å’Œä¸­æ–­æ—¶æåˆ°å¤šæ¬¡è¿™ä¸ªé‡å…¥çš„è¯
- errataï¼šä¹¦ç±çš„å‹˜è¯¯è¡¨

æœ‰æ„æ€çš„è¯:
- implicit: æ½œåœ¨
- phenomenon: ç°è±¡
- preceding: å…ˆå‰çš„
- subsequent: åä¸€ä¸ª, e.g: subsequent editions of the book
- POSIX-compliantï¼š å…¼å®¹POSIXæ ‡å‡†
- eliminate: æ¶ˆé™¤
- inevitable: ä¸å¯é¿å…çš„/å¿…ç„¶çš„

çŸ­è¯­:
- **early hours: å‡Œæ™¨**
- consumed virtually all the CPU time: å‡ ä¹å æ»¡äº†CPUæ—¶é—´
- brush up: å¤ä¹ ï¼Œé‡æ–°å­¦ä¹ 
- be wary of: è°¨æ…
- comprised of: åŒ…å«
- composed of: ç”±...ç»„æˆ

---

## Introduction

ä¸»è¦çœ‹è¡Œæ–‡è§„åˆ™/å°åˆ·çº¦å®š/ç¬¦å·çº¦å®šï¼Œä¾‹å¦‚ç²—ä½“å­—æ˜¯è¡¨ç¤ºä»€ä¹ˆæ„æ€çš„ä»£ç ä¹‹ç±»çš„è§„å®š

Introductionç« èŠ‚çš„ä¸€äº›ç–‘é—®:
- cursesåº“ç”¨æ¥å‘½ä»¤è¡Œäº¤äº’?

---

## ch1.GetStarted

ç®€è¯„ Instroduction åˆ° GetStarted éƒ½è¿‡äºæ°´ï¼Œè€Œä¸”è¿‡å¤šç¯‡å¹…æ¯”è¾ƒlinuxå’Œwindowsçš„å·®å¼‚

> A complete discussion of shared libraries and their implementation on different systems is beyond the scope of thisbook

æœ¬ä¹¦å¯¹åŠ¨æ€åº“çš„æè¿°æœ‰é™ï¼Œä¸åƒé™æ€åº“é‚£æ ·æœ‰è¯¦ç»†ä¾‹å­æ•™ä½ æ€ä¹ˆç¼–è¯‘

### GetStartedçç¢éœ€çŸ¥è¯†

- `/bin`ï¼šexecutable binaries used in booting the system
- bison/yacc command: flex: lexer?, bison: parser
- å¯ä»¥ç”¨grepåœ¨/usr/includeä¸­æ‰¾åˆ°exitç³»ç»Ÿè°ƒç”¨çš„å…¥å‚å¸¸é‡: EXIT_SUCCESS(stdlib.h)
- libdbm.so
- Unix need `$ randlib libsll.a` operation to add table of content to sll, linux is optional
- libm.so.6ä¸­çš„`.6`è¡¨ç¤ºlibm.soçš„ç‰ˆæœ¬6

### /etc/ld.so.conf

é™¤äº†/usr/libï¼Œé¢å¤–çš„LD_LIBRARY_PATHåº“æœç´¢è·¯å¾„çš„é…ç½®åœ¨`/etc/ld.so.conf`

### ctags

> ctags source code cross-reference system, which records symbollocation information as regular expressions suitable for use by searching programs

åŒäº‹è¯´è¿‡Cè¯­è¨€ä¸å®¹æ˜“åŸºäºASTè·³è½¬ä»£ç å®šä¹‰ï¼Œä¸€èˆ¬éƒ½é å…¨æ–‡æœç´¢æˆ–è€…å…¨æ–‡æ­£åˆ™æœç´¢

ctagsæ˜¯ä¸ªå¸®åŠ©è·³è½¬å‡½æ•°å®šä¹‰çš„é™æ€åˆ†æå·¥å…·

### ç±»ä¼¼mançš„infoå‘½ä»¤

infoå‘½ä»¤æ¯”mançš„ä¼˜ç‚¹åœ¨äºè”ç½‘æµè§ˆæœ€æ–°æ–‡æ¡£ä»¥åŠæ”¯æŒè·³è½¬

> benefit of the info system is that you can navigate the documentation using links

æˆ‘æ²¡ææ‡‚emacsè·³è½¬åˆ°ä»£ç å®šä¹‰çš„å¿«æ·é”®
è¯·æ•™äº†ç©emacsçš„åŒäº‹æ‰çŸ¥é“ã€ŒæŒ‰ä¸‹å›è½¦ã€å°±èƒ½è·³è½¬

---

## ch2 bash part1

- åƒé‡å®šå‘æˆ–ç®¡é“ç¬¦å·å…¶å®éƒ½æ˜¯æºäºbashè¯­è¨€
- export command æ˜¯ä¸ºäº†set env_var in subshells, `set -a`ä¼šexportå½“å‰æ‰€æœ‰å˜é‡
- ç¼–å†™bashè„šæœ¬çš„å¥½ä¹ æƒ¯æ˜¯æœ€åä¸€è¡ŒåŠ ä¸Š`exit 0`
- `1+1`ä¼šæç¤ºcommand not foundï¼Œè¦ç”¨`expr 1 + 1`å°†å…¶è¯†åˆ«ä¸ºè¡¨è¾¾å¼ï¼Œæ³¨æ„exprå‘½ä»¤çš„åŠ å·å’Œæ•°å­—é—´è¦ç©ºæ ¼éš”ç¦»å¼€

ç–‘é—®:
- set-group-id/set-gidå’Œset-user-id/set-uid bit_flag

### ã€Œé‡è¦ã€å¸¸ç”¨bash $å˜é‡

- `$?`ä¸Šä¸ªå‘½ä»¤çš„exit_code
- `$_`è¡¨ç¤ºä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œç±»ä¼¼`Esc+.`
- `$$`å½“å‰å½“å‰è¿›ç¨‹çš„PID,å¸¸ç”¨äºåˆ›å»ºä¸´æ—¶çš„sockæ–‡ä»¶ä¾‹å¦‚`/tmp/pid_$$.sock`
- `$#`è¡¨ç¤ºå½“å‰è¿›ç¨‹çš„å‚æ•°ä¸ªæ•°
- `$0`è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°(å°±æ˜¯/bin/bashå¯æ‰§è¡Œæ–‡ä»¶å)
- `$*`list all args/parameter from $1
- `$@`å»ºè®®ç”¨$@éå†argsï¼Œä¸ä¼šå—åˆ°IFSç¯å¢ƒå˜é‡çš„å½±å“
- `$PS1`è¡¨ç¤ºbashæç¤ºç¬¦çš„å‰ç¼€ï¼Œä¾‹å¦‚`root@localhost $`

### `2>&1`

> $ kill 123456 >killouterr.txt 2>&1

`2>&1` means direct standard error to the same place as the standard output

ä¹Ÿå°±æ˜¯STDOUTå’ŒSTDERRæ’å‘åŒä¸€ä¸ªæ’åº§ï¼Œè€Œä¸æ˜¯æŠŠSTDERRæ±‡æµåˆ°STDOUT

`2>&1` çš„ç»å…¸ä½¿ç”¨ä¾‹å¦‚å°† maven æµ‹è¯•çš„ stdout/stderr æ‰“åˆ°åŒä¸€æ–‡ä»¶åšè®°å½•   :

> mvn test 2>&1 | tee log.txt

### ã€Œé‡è¦ã€testå‡½æ•°

åœ¨zshä¸­æ‰èƒ½çŸ¥é“æŸä¸ªå‡½æ•°æ˜¯ä¸æ˜¯bashè‡ªå¸¦å‡½æ•°

which test: `test: shell built-in command`

`if test -f ch02_args.sh` ç­‰åŒäº `if [ -f ch02_args.sh ]; then`

ä¾‹å¦‚ç”¨testå‡½æ•°æ£€æµ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨:

```bash
if [ -f ch02_args.sh ]; then # need to add whitespace around `[` and `]`
    echo "file is regular file"
else
    echo "file not exist or not a regular file"
fi
```

!> å¯ä»¥ç”¨`help test | less`æŸ¥çœ‹testå‡½æ•°å®Œæ•´çš„å‚æ•°åˆ—è¡¨

ã€Œé‡è¦ã€testå‡½æ•°å¸¸ç”¨è¡¨è¾¾å¼:
- -v var # 
- int_expr -eq int_expr
- -n string # string is not null and not empty
- -a file # file exist
- -d file # file is a dir(è¿™é‡Œè·Ÿstatç³»ç»Ÿè°ƒç”¨æ¢æµ‹æ–‡ä»¶ç±»å‹é«˜åº¦ä¸€è‡´)
- -f file # file is a regular file

test -? è·Ÿ findçš„-type ? è·Ÿ stat é«˜åº¦ä¸€è‡´

ä¾‹å¦‚ find -type d è·Ÿ test -d éƒ½æ˜¯è¡¨ç¤ºæŸ¥æ‰¾æ–‡ä»¶å¤¹ç±»å‹çš„æ–‡ä»¶

### bash `:` ç¬¦å·

`while :`ç­‰åŒäº`while true`

è¿˜æœ‰ä¸€ä¸ªç”¨æ³•`: ${var:=value}`å†’å·èƒ½é¿å…varä½œä¸ºå˜é‡è¢«eval(è¯´å®è¯å¯è¯»æ€§æå·®æ²¡çœ‹æ‡‚å…ˆè·³è¿‡è¿™ä¸ªçŸ¥è¯†)

### bash dot command

> . ./shell_script

`. ./shell_script`ç‚¹åé¢æ‰§è¡Œçš„è„šæœ¬èƒ½ä¿®æ”¹å½“å‰shellç¯å¢ƒçš„å˜é‡

`.` prelead can execute the command in the current shell context

### æ’åºå»é‡æ˜¾ç¤ºæ‰€æœ‰érootè¿›ç¨‹

> ps -ef | sort | uniq | grep -v root | more

### ç®¡é“è¯­æ³•é”™è¯¯ç¤ºä¾‹

> cat mydata.txt | sort | uniq > mydata.txt

> you will end up with an empty file, because you will overwrite the mydata.txt file before you read it.

### bash readå‡½æ•°

```
$ read var_name
$ echo $var_name
my_input
$ echo \$b
$b
$ echo '$b' # è·Ÿrubyä¸€æ ·å•å¼•å·ä¸æ›¿æ¢å˜é‡
$b
$ echo "$b"
my_input
```

### ã€Œæœ‰è¶£ã€wallå‘½ä»¤å’Œ/dev/pts

Beginning Linux Programmingçš„ä½œè€…å†…å®¹ç¼–æ’çœŸçš„ç”¨å¿ƒ
æˆ‘è¯»äº†50å¤šé¡µä»‹ç»ä¸åŒçš„Linuxå‘½ä»¤å°±æœ‰30å¤šä¸ªï¼Œæ–°çš„ä»£ç ä¾‹å­éƒ½ç”¨æ–°ä»‹ç»linuxå‘½ä»¤å»æ¼”ç¤º

ä¾‹å¦‚æˆ‘åˆšåˆšå­¦åˆ°çš„wallå‘½ä»¤å¯ä»¥å‘/dev/pts/ä¸­æ‰€æœ‰shellå‘é€é€šçŸ¥(å¦‚å›¾)

> å¯ä»¥é€šè¿‡ `ps -a` æŸ¥çœ‹æ‰€æœ‰ terminal (TTY)ç±»å‹çš„processï¼Œä¹Ÿå°±æ˜¯ wall ä¼šç»™ `ps -a` çš„æ‰€æœ‰è¿›ç¨‹å‘é€šçŸ¥

æˆ‘è¯»ç¬¬äºŒç« çš„æœ€å¤§æ”¶è·å°±æ˜¯bash testå‡½æ•°ï¼Œtestæ£€æŸ¥æ–‡ä»¶ç±»å‹è·Ÿstatç³»ç»Ÿè°ƒç”¨é«˜åº¦ä¸€è‡´

wallå‘½ä»¤çš„æ¶ˆæ¯æ¨é€æ¯”`echo -e "\a"`å¼ºå¤§å¤šäº†

è¯´åˆ°æ¶ˆæ¯æ¨é€ï¼Œlinux è¿˜æœ‰ä¸€ä¸ª `notify-send "hello"` æ¨é€æ¶ˆæ¯åŠŸèƒ½

![](linux_wall_command_notify.png)

### shift - args.pop(0)

> set $(date)

before shift: $1=Wed $2=Jun

after shift : $1=Jun, $#(args.len()-=1)

### trap - ä¿¡å·æ•è·

`trap -l` èƒ½åˆ—å‡ºsignal.hä¸­æ‰€æœ‰ä¿¡å·

### ã€Œé‡è¦ã€findå‘½ä»¤

æŸ¥æ‰¾æ‰€æœ‰æ–‡ä»¶å¤¹åå­—å¸¦æœ‰bashçš„: find -type d -and -name bash*

`find -type -d` è·Ÿ `test -d` ä¸€æ ·éƒ½æ˜¯æ£€æµ‹æ–‡ä»¶å¤¹ç±»å‹çš„æ–‡ä»¶

å¦‚æœä¸æƒ³æŠŠæŸ¥è¯¢è¿‡æ»¤å‚æ•°è·Ÿå…¶å®ƒå‚æ•°æ··åœ¨ä¸€èµ·æˆ–è€…æœ‰æ­§ä¹‰ï¼Œå¯ä»¥åƒè¿™æ ·ç”¨æ‹¬å·æŠŠè¿‡æ»¤æ¡ä»¶çš„å‚æ•°åŒ…èµ·æ¥:

ç‰¹åˆ«æ˜¯å¤§é‡oræˆ–andæ¡ä»¶å¹¶åˆ—æ—¶æ›´éœ€è¦åŠ æ‹¬å·æ¥é¿å…æ­§ä¹‰

> \(-newer X -or -name "_*" \)

find ç”¨ä¸Šé€šé…ç¬¦æ—¶å°½é‡ç”¨åŒå¼•å·åŒ…èµ·æ¥ï¼Œå¦åˆ™å¯èƒ½å‚æ•°è§£æå¤±è´¥

!> find -exec å‚æ•°åå¿…é¡»è·Ÿä¸Š`\;`è¡¨ç¤ºexecæ‰§è¡Œçš„å‘½ä»¤ç»“æŸï¼Œexecçš„`{}`è¿™å¯¹**èŠ±æ‹¬å·è¡¨ç¤ºfindåˆ°çš„æ¯ä¸ªæ–‡ä»¶å**

> find . -type f -and -name "*function*" -exec stat {} \;

ğŸ’ğŸ’•: ***find -exec grep*** ç»“åˆä½¿ç”¨è¾¾åˆ°idea/vscodeé¡¹ç›®æ–‡ä»¶å¤¹*å…¨æ–‡æœç´¢*çš„æ•ˆæœ
