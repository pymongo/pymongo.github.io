# [做市商PFOF模式](/2024/02/market_maker_payment_for_order_flow.md)

在以2021 GameSpot GME股票轧空事件为背景的书籍电影 dump money中，以及我在b站上看leon金融 up的解说

记者采访Robinhood券商app的CEO，你们不收取佣金费怎么赚钱

电影中的答复一是利用用户账户里面的钱投资赚利息,其二收入来源是做市商的 payment for order flow

payment for order flow 翻译成利益互换/支付订单流，或者电影中形容成stock order routing股票买卖盘传递

在Robinhood app下单，订单实际上传递到做市商(城堡证券)

we send your order to maker makers, who process the order. They pay us a tiny rebate on every trade

> 假设当前股票的orderbook为空，例如用户1在Robinhood上用价格11买入，用户2用价格10卖出，这样形成了spread价差，做市商可以用10.4买入用户2的股票，再用10.8卖出给用户2，赚取0.4的价差。我这样理解Payment for Order Flow的利润对吗？

您的理解有一定的道理，但需要进一步澄清Payment for Order Flow (PFOF) 的利润来源。在您的例子中，用户1愿意以11美元买入，而用户2愿意以10美元卖出，存在1美元的价差（spread）。做市商会在这个价差中设定自己的买卖价格，以期从中获利。

假设的情形如下：

- 做市商给出的买价（Bid）为10.4美元，卖价（Ask）为10.8美元。

在这种情况下，假设没有其他订单，做市商会从用户2那里以10.4美元的价格买入股票，并且准备以10.8美元的价格卖给用户1，从中赚取0.4美元的价差。

然而，PFOF的利润并不直接来自于买卖之间的价差，而是来源于券商如Robinhood将订单流卖给做市商的做法。具体来说：

1. **订单流：** 券商会收集用户的交易订单，形成订单流。

2. **PFOF：** 券商将这些订单流卖给做市商，做市商为了能够接触到这些交易而支付给券商一定的费用。

3. **执行交易：** 做市商执行这些订单，在买卖双方之间赚取价差。

重要的是要理解，PFOF的收入来源是做市商支付给券商的费用，而不是做市商从交易价差中获得的利润。虽然这两者是相关的——因为没有价差做市商就无法盈利，因此也就不会有动力支付PFOF——但它们是两个不同的收入来源。

在实际的市场环境中，订单的执行情况会更加复杂，因为市场上存在多个买家和卖家，以及多个做市商，他们都在实时更新自己的买卖价格。此外，还有其他因素会影响交易成本和利润，比如市场波动性、订单的执行速度和滑点。

> 在金融领域中，2021年GameStop的GME股票轧空事件中，为什么罗宾汉券商的交易佣金费是零，他们说是通过做市商赚钱，这样的商业模式是如何盈利呢？

在金融领域，尤其是在股票交易中，券商如Robinhood提供零交易佣金的盈利模式主要基于以下几个途径：

1. 收益互换（Payment for Order Flow, PFOF）：
   Robinhood这样的券商将客户的交易订单流转给第三方，通常是做市商（Market Makers），以换取一定的费用。做市商愿意支付这些费用，因为他们可以通过对冲这些订单流中的微小价格差异来获利，例如利用订单流信息进行高频交易策略。这种做法可以让做市商获得交易流的优先权，并且从中赚取价差（即买卖价格之间的差额）。

2. 利息收入：
   用户在券商账户中的未投资现金余额可以被券商用来赚取利息。虽然个别用户的未投资现金可能微不足道，但汇总所有用户的未投资现金，券商可以从中获取可观的利息收入。

3. 保证金利息：
   当用户使用保证金账户进行交易时，他们实际上是在借贷资金。券商会对这些借出的资金收取利息，这也是券商的一条重要收入来源。

4. 高级服务费用：
   虽然基本的交易服务是免佣金的，但是券商可能会对一些高级服务收费，比如即时转账费用、外币兑换费用或是为高级账户用户提供的增值服务。

5. 资产管理和咨询服务：
   券商可能会提供资产管理或财务咨询服务，并为此收取费用或提成。

在GameStop的GME股票轧空事件中，由于交易量激增，相应地，通过这些途径产生的收入也会大幅增加，特别是来自做市商的支付订单流。然而，这种模式也引起了一些争议，尤其是关于潜在的利益冲突，以及是否真正为投资者提供了最好的交易执行价格。美国证券交易委员会（SEC）和其他监管机构对此进行了审查，并对这种做法的合规性和对投资者的影响提出了关注。

> 在2020年中国银行原油宝事件中，散户并没有直接在芝加哥交易所开户，中国银行作为做市商，内部先消化或者促成/撮合原油宝多空用户的交易，最后如果做多头寸更多，再去芝加哥交易所进行开仓。这样的商业模式是不是很像Robinhood上买卖股票并非直接购买，而是经手做市商过一段时间后跟Robinhood的对手盘用户，例如我是买入，做市商帮我撮合到Robinhood的卖出用户，然后完成交易

中国银行的原油宝事件和Robinhood的股票交易模式虽然在表面上有相似之处，但实际上它们涉及的具体业务模式和风险管理机制有所不同。下面将分别概述两者的业务模式，并对它们进行比较。

### 中国银行原油宝事件的业务模式：

1. **内部撮合（对冲）：**
   中国银行的原油宝产品允许散户投资者通过人民币投资原油期货。中国银行内部先对多空头寸进行撮合，尽量在内部消化客户的对冲需求。这种做法减少了市场风险敞口，因为如果多头和空头的数量相等，它们可以相互抵消。

2. **对外对冲：**
   如果某一方的头寸（比如多头）超过了另一方，中国银行需要在国际市场上对剩余的风险进行对冲。例如，如果做多的头寸较多，中国银行则需要在芝加哥商品交易所等市场进行原油期货的开仓操作，以对冲风险。

### Robinhood的股票交易模式：

1. **Payment for Order Flow (PFOF)：**
   Robinhood通过将客户订单流卖给做市商（如Citadel Securities等）来赚取收益。这样，做市商能够控制更多的订单流，并从中获利。

2. **延迟结算：**
   用户在Robinhood上的交易可能不会即时在交易所上执行。做市商可能会先在内部尽量撮合交易，然后再将无法在内部匹配的订单发送到交易所或其他场所。

### 比较两者：

- **撮合方式：**
  两者都采用了内部撮合的方法来减少市场风险的暴露。对于原油宝来说，是先在内部尽量撮合多空头寸，而Robinhood是通过做市商来实现用户间的交易撮合。

- **风险对冲：**
  当内部无法完全撮合时，两者都需要对外对冲未平仓的风险。对于中国银行的原油宝来说，是在期货市场进行对冲，对于Robinhood来说，做市商可能会在不同交易所完成订单的最终匹配。

- **商业模式：**
  Robinhood的商业模式包括通过PFOF赚钱，而中国银行原油宝的收益则可能来自产品的利差以及管理费用。

- **风险管理：**
  风险管理上，原油宝事件揭示了中国银行可能未能充分预测到极端市场情况下的风险，特别是在2020年油价负值的情况下。而Robinhood的风险管理则侧重于通过做市商合作来实现，但也面临着市场极端情况下的挑战。

尽管两者都涉及内部撮合和外部对冲，但原油宝事件与Robinhood的股票交易在具体的金融产品、市场操作和风险管理方面有显著差异。原油宝的问题在于产品设计和风险预警机制，而Robinhood面临的则是与其业务模式相关的市场公平性和透明度问题。

> 为什么一般交易所或者券商自己做自己的做市商会是不安全风险高的行为？例如robinhood券商零佣金但是城堡证券是他的做市商，加密货币中FTX交易所的做市商就是自己的公司Alameda Research被很多人诟病风险太大，自己做自己的做市商有什么问题吗？

交易所或券商自身充当做市商存在潜在的利益冲突和风险问题，这些问题的核心通常包括以下几点：

### 利益冲突：
1. **信息优势**：如果券商同时是做市商，它们可能会利用客户的交易信息来自身的利益，例如，提前知道客户的买卖订单，做市商可能会利用这些信息来前置交易（front-running）。
2. **价格操纵**：券商作为做市商，可能会影响市场价格，以自己的交易为利益最大化，这可能不符合客户利益。

### 风险管理：
1. **风险集中**：通常，分散化的做市商系统可以分散风险。但如果券商自己做市，所有的风险就集中在一个机构上，一旦市场剧烈波动，可能会加剧系统性风险。
2. **流动性问题**：在市场压力下，券商可能无法同时维持做市商职责和自身的财务稳定，可能会导致流动性问题，影响市场的正常运作。

### 监管要求：
1. **监管限制**：很多市场监管机构对于券商和做市商的角色有明确的分隔规定，以防止利益冲突和市场操纵。
2. **透明度要求**：券商作为做市商时，可能会降低市场透明度，给监管机构带来监管难度。

以Robinhood和Alameda Research为例，这些公司的业务模式引发了关于利益冲突和风险管理的担忧：

- **Robinhood & Citadel Securities**：Robinhood通过向Citadel Securities等做市商出售订单流（payment for order flow, PFOF）来获利，这使得做市商能够提前知道并执行这些订单，引发了关于市场公平性和透明度的问题。
  
- **FTX & Alameda Research**：FTX交易所和Alameda Research之间的关系密切，Alameda作为做市商参与FTX平台的交易，这种结构对外部投资者而言可能不够透明，而且在风险管理方面可能存在问题。

总的来说，券商或交易所同时担任做市商可能带来一系列问题，包括利益冲突、风险集中、监管遵循问题等。市场和监管机构通常对此类实践持审慎态度，以确保市场的公平性和稳定性。在进行这种业务模式时，相关公司需要实施严格的内部控制和透明度措施，以降低潜在的风险。

> 中国327国债事件，同一个公司的多个股票账号，在市场上互相买卖，左手倒右手，能不能操纵市场价格？

在市场上，同一个公司使用多个股票账号互相买卖股票，俗称“自买自卖”或“洗单”，是一种操纵市场价格的行为，可能具有以下几个目的和效果：

### 操纵市场价格的目的：
1. **创造虚假的市场活跃度**：通过频繁交易产生虚假的交易量，给市场其他参与者一种该股票交易活跃的错觉。
2. **影响股票价格**：通过设定特定的买卖价格，可以人为地推高或者压低股票价格。
3. **误导市场参与者**：其它投资者可能会被这种人为的交易活动所误导，进而做出基于错误信息的交易决策。

### 操纵市场价格的效果：
1. **价格操纵**：通过内部协调的买卖，可以在短时间内人为地提高或降低股票价格。
2. **交易量操纵**：创造出虚假的交易量，影响其他投资者对股票流动性的判断。

### 法规禁止与后果：
- 在多数法域，这种行为被视为非法的市场操纵，因为它扭曲了市场的正常供需关系和价格发现机制。
- 被监管机构发现的话，可能会受到法律制裁，包括罚款、交易禁令，甚至是刑事起诉。

### 监管检测：
- 监管机构和交易所通常有复杂的系统和算法，用于检测和调查市场操纵的行为，包括不寻常的交易模式和账户之间的关联性分析。

因此，尽管理论上通过“左手倒右手”的交易可以试图操纵市场价格，但这种行为不仅在道德上受到谴责，在法律上也是被严厉禁止的。监管机构对此类行为保持高度警惕，并拥有追踪和处罚的能力。实际上，持续的市场操纵需要大量资金和复杂的策略，而且很容易被市场监管机构发现，因此风险极大。

在中国历史上的327国债事件是指1992年3月27日发生的一起有名的金融操纵事件，涉及市场操纵行为。当时的中国证券市场相对不成熟，监管体系和技术手段也不像现在这样发达和完善。

当时的交易制度允许投资者在买入股票或国债当天就能卖出，即不存在现在普遍实行的T+1交易制度（即今天买入的证券必须持有到第二个交易日才能卖出）。这种制度为一些市场操纵行为提供了便利，因为操纵者可以在很短的时间内反复买卖同一证券，制造虚假的交易量和价格变动，从而误导其他投资者。

在327国债事件中，有人利用多个账户进行自买自卖，通过制造交易量和影响价格，吸引其他不知情的投资者跟风买入，然后在高位卖出实现利润。这种行为扭曲了市场正常的供求关系和价格发现机制，对市场秩序造成了破坏。

这一事件后，引起了中国政府和监管部门的高度重视，随后逐渐引入了更为严格的监管规则和交易制度改革，包括实行T+1交易制度、加大对市场操纵行为的打击力度、提高透明度和信息披露要求等，以促进市场健康稳定发展。

## 什么是价格发现

既然做市商需要利用【信息面】进行价格发现，参考leon金融视界的长期资本公司视频故事了解下价格发现

> 在金融领域中，例如我发现加密货币usdt和usdc都是锚定一美元稳定币，但是现在行情，usdc比usdt贵0.14%是不合理的，我认为这个定价是错误的，所以我要做空usdc做多usdt进行基差价差套利，这就是价格发现，我理解对吗？价格发现就是发现定价不合理

在金融领域，价格发现是一个市场机制，它允许市场参与者通过交易活动来确定资产的价格。这个过程包括对供需、市场情绪、外部因素和其他相关信息的评估，最终在交易中形成资产的价格。

对于你的情况，USDT和USDC都是稳定币，设计上是1:1锚定美元。然而，在实际交易中，它们的价格可能会因为市场的供求关系、流动性、信任度以及其他宏观经济因素而出现微小的波动。当你观察到USDC相对于USDT贵了0.14%，并认为这个价格不合理时，你的想法是通过交易来利用这个价格差异获利，这种操作通常被称为套利。

在执行这个策略时，你会做空价值较高的USDC（借入后卖出），同时做多价值较低的USDT（买入），期望在两者的价差缩小或者消失时获利。如果市场最终认同你的观点，即USDC的价格不应该高于USDT，那么价格将会调整，你通过套利获得的利润就是因有效的价格发现。

但是，在实际操作中，需要考虑以下几个因素：

1. **交易成本**：所有的交易都会有成本，包括交易手续费、资金借贷成本等，这些都会影响套利的最终利润。
2. **市场流动性**：在流动性不足的市场中，大额交易可能会对价格产生较大影响，导致滑点（交易价格与预期价格的差异）。
3. **执行风险**：市场价格可能在你执行交易的时候发生变动，这可能会导致实际结果与预期不同。
4. **信用风险**：在借贷和交易过程中，可能会面临交易所或对手方违约的风险。

因此，虽然理论上你的理解是正确的，但在实践中进行价格发现并执行套利策略需要考虑到上述风险，并且需要有相应的风险管理措施。此外，定价可能受到多种复杂因素影响，并不一定是错误的，因此你的操作应该基于全面的市场分析。

> 在金融市场中，有没有恶意的价格发现的说法？例如某些价格发现套利的行为是违法中国或者美国证券法

在金融市场中，通常所说的“恶意的价格发现”可能不是一个正式的术语，但可以理解为市场操纵的一种形式，这是违法的。市场操纵指的是投资者通过一系列交易行为故意影响金融产品的价格，以创造虚假或误导性的价格信号，从而获得不正当利益。

例如，如果某个交易者或交易团体通过大量交易来人为地提高或降低一个资产的价格，然后利用这个不真实的价格进行交易以获得利润，那么这种行为可能被视为市场操纵。美国证券法和中国证券法都明确禁止了这类行为。

在美国，证券交易委员会（SEC）负责监管市场，并打击市场操纵等违法行为。SEC会监控不正常的交易活动，如果发现有操纵行为，会进行调查并采取行动。

在中国，中国证监会（CSRC）负责类似的监管职能，依据中国的证券法和相关法规，打击市场操纵和内幕交易等违法行为。

传统的套利交易，如你之前提到的基差套利，是一种利用不同市场或不同产品之间价格差异来获得无风险利润的策略。这种行为在本质上是合法的，因为它有助于市场效率和价格发现。然而，如果套利行为涉及到虚假交易、传播虚假信息、操纵市场价格等违法手段，那么这种套利就可能构成违法行为。

总之，价格发现本身是市场机制的一部分，是合法的。但如果价格发现的行为涉及到欺诈、操纵或其他违法手段，就可能构成恶意的价格发现，这在多数司法管辖区都是违法的。

---

## 储蓄银行禁止证券业务

美国禁止储蓄银行参与证券业务的立法背景可以追溯到1933年的《格拉斯-斯蒂格尔法案》(Glass-Steagall Act)。以下是禁止的主要原因和立法的步骤分析：

### 立法的原因：

1. **1929年股市崩溃**：1929年的股市大崩溃后，美国经济进入大萧条时期。政府和公众认为银行投机性的证券活动是导致股市崩溃和随后经济萧条的一个重要原因。

2. **银行业冲突利益**：商业银行与证券业务的结合被认为存在利益冲突。银行可能因为自身的证券投资而忽视客户利益，或者误导客户投资于自身发行或有利益关系的证券。

3. **保护储户资金**：银行参与风险较高的证券业务可能危及储户的存款安全。立法的目的之一是为了保护存款人的资金，防止银行因为高风险投资而破产。

4. **防止金融垄断**：分离银行业务和证券业务有助于防止金融市场上的垄断行为，确保市场的竞争性和公平性。

### 立法的步骤：

1. **调查与论证**：经济学家和立法者调查了1929年经济崩溃的原因，并提出了银行业务与证券业务分离的提案。

2. **立法过程**：经过国会的辩论和修改，1933年，《格拉斯-斯蒂格尔法案》被通过并签署成法。

3. **实施与监管**：法案的实施由美国财政部和联邦储备系统监管，确保商业银行和投资银行的业务得到有效分离。

### 后续发展：

《格拉斯-斯蒂格尔法案》的某些条款在1999年被《金融服务现代化法案》（Gramm-Leach-Bliley Act）所废除，这允许银行业务和证券业务再次合并。然而，2007-2008年全球金融危机后，又有声音呼吁重新分离银行业务和证券业务，以减少系统性风险。

### 当前状态：

在写作本文的时点（2023年4月前的信息），具体的立法情况会根据最新的经济环境和政策走向而有所变化。在分析此类问题时，需要考虑最新的法律、政策以及金融监管环境的变动。

> 可是次贷危机之后，好像美林银行跟投资银行合并，有好多储蓄银行跟投资银行合并，银行也有证券和投资业务了

确实，在次贷危机之后，美国的金融体系发生了一系列变化，其中包括银行业的重大合并。分析这一现象的原因如下：

### 政策变化：
- **《金融服务现代化法案》（1999）**：这一法案废除了《格拉斯-斯蒂格尔法案》中关于银行业务与证券业务分离的一些关键条款，从而允许商业银行、投资银行和保险公司之间的合并。
- **应对金融危机的措施**：在2007-2008年的全球金融危机期间，一些投资银行面临流动性问题或破产风险。为了稳定金融市场，政府允许某些投资银行转型为商业银行或允许它们被传统商业银行收购。

### 市场动态：
- **风险管理需要**：金融危机后，市场对风险管理的要求更高。商业银行与投资银行的合并被认为能够更好地集中管理风险。
- **规模经济**：大型金融机构可以通过整合多种金融服务来实现规模经济，提高效率和竞争力。
- **多元化战略**：银行通过合并和扩展服务范围，以实现业务的多元化，降低单一业务领域的风险。

### 监管调整：
- **强化监管**：尽管允许了业务的整合，但是监管机构加强了对银行业务的监管。例如，根据2010年通过的《多德-弗兰克华尔街改革和消费者保护法案》，增加了对大型金融机构的监管要求。

### 当前挑战：
- **系统性风险**：银行业务的整合可能会增加系统性风险，即某一家大型金融机构的问题可能对整个金融系统造成影响。
- **调整监管框架**：监管机构需要不断调整监管框架，以适应金融市场的发展和新出现的风险。

综上，美国银行业在次贷危机之后的合并和业务整合，既受到历史法律变化的影响，也是市场和监管环境变化的结果。监管机构在允许合并的同时，也在努力寻找平衡点，以确保金融稳定性和消费者保护。
