# [再学 Rust for Linux](/2023/08/rust_for_linux.md)

内核入口函数 main.c start_kernel

## kernel config
以图形化的内核配置为例，方括号是只能选 y/n 尖括号的话还能选 m 也就是编译成模块但不嵌入到内核

## include/linux/drive.h
设备是一个树，注意总线本身也是一个设备，是所有设备的根

### platform 虚拟总线


### coherent_dma_mask
设备的寻址范围很可能小于 64 位内存，所以要一个 mask 过滤出设备自身寻址

### 一致性 DMA
一致性DMA的概念涉及到设备和系统内存之间的数据一致性。在多核处理器系统中，不同的处理器（或设备）可能有各自的高速缓存，数据被存储在这些缓存中并可能不同步更新到主内存中。这就可能导致设备访问的数据与主内存中的数据不一致。一致性DMA的目标是确保设备访问的数据与主内存中的数据一致。
