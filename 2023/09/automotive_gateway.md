# [Automotive Gateway](/2023/09/automotive_gateway.md)

汽车网关是一个"路由器"，使数据在车辆内部的多个网络(CAN、LIN、MOST、FlexRay等)中安全可靠得进行传输，负责协调不同结构特征的CAN总线网络和其他数据网络之间的协议转换故障诊断等工作，还连接了各个 ECU

![](https://static.mianbaoban-assets.eet-china.com/xinyu-images/MBXY-CR-546898a88ebf99bbdbe2ac9cfc38f67a.png)

## CAN协议和以太网的OSI架构的不同
CAN 协议很多功能/抽象层是在硬件上完成的

```
流量控制：CAN协议使用了一种先进先出（FIFO）的发送队列机制来控制流量。每个CAN节点都有一个发送缓冲器，数据帧按照先后顺序进入该缓冲器。发送节点通过仲裁机制决定哪个节点具有发送优先权，并且只有当总线上没有其他节点发送数据时，才能发送当前节点的数据。这种机制确保了总线上的数据传输不会发生冲突和碰撞，从而有效地控制了流量。

路由仲裁：当多个节点同时试图发送数据时，CAN协议使用了一种基于标识符的仲裁机制来确定优先权。CAN帧的标识符由优先级（Identifier）字段表示，标识符值越小的帧具有较高的优先级。当多个节点同时发送数据时，根据标识符的比较结果，具有较低标识符的节点获得优先权，并开始发送数据。这种路由仲裁机制确保了总线上不同节点间的公平竞争和数据传输的有序性。

总的来说，CAN协议通过流量控制和路由仲裁机制来确保总线上的数据传输的稳定性和有效性。流量控制机制通过发送队列和仲裁机制来控制数据的发送顺序和优先级，避免了数据冲突和碰撞。路由仲裁机制根据标识符的比较结果来确定哪个节点具有发送优先权，实现了公平竞争和有序的数据传输。
```

## 网连车的自动驾驶技术级别
汽车的L1、L2、L3、L4和L5标准是指自动驾驶技术的五个级别。大部分新能源汽车包括特斯拉都是L2级别

## 汽车域控制器(Domain Control Unit)
由于车载系统的ECU芯片过多功能也多，因此加了一层汇总抽象例如动力域名、底盘域、车身域、

ADAS(Advanced Driver Assistance System)自动驾驶域

## T-BOX
Telematics Box车载远程通信模块继承蜂窝网络、WiFi、蓝牙等

## BSP
Board Support Package

## Reference
- <https://www.arrow.cn/blog/post/gateway.html>
